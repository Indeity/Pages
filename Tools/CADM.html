<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <!--    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">-->

    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


    <link id="favicon" rel="shortcut icon" type="image/png"
          href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFW0lEQVRYR82XfVSPZxjHP0+/VbLQVETMvA8x5G3NwRRFmfdNjZPUvI8zQrbD7DibcjRkGsvbykupM+0gB01DGKUYsZMY1mqIsPL2U8/O3VX7WX6ms7F2//c8z/Xyva/r+73u+9Go6grV62DBQHT6otMJeAWwK3e/CVxEIxONfZSSRIh2qyqhtacafaa3woI5gC9g81R7MbgLbKGUMD7Usv/O58kAPtdtMLIQnWmAZRUTVzYzohGBJfOYoSlQjy3zABbqLbFkG9DuHyau7JaFkaHM085V/vA4gE/1zhjYDTg8o+QVYQoowZOPtIxH4/4VgOz88HNIbgJhxO3RSpgAqJ4/IO0Zlv1JBczCiq4VnDABCNOXoDPzGZfdfDiNcOZoweqjABCpnf4XbK8ybk0DXcdIKS5KogIgVF9rbWDcvDfg3bZlBkRmwpJjprhL3gQXBxiYAKW6vK9tBWn+8FsxbMqCDafhQYnJx9kWxrhA6A+md+n+cDQPpuxlHSFaoEaoXkeD/G+HY9POAYJ2QY0XYPtw8IqH5IvinD8FnGzBOx6SLpgC5kyArAJoXRdKSmHoNsi+Id/7NoHvRoFbDBzJk3enA+HGPei1qWxYNdBYrPsOasbmxGHgugFOXBXDiR0hpxCSL4GlBdwPBlU+tdPRO0wALk2CZenwZSbEeMPrzuD6NVwpBp/msH0EhB+D4BSJUzwTbt8HhwjAAj+NMD0qdhBBDjXBI9Z8KxvVgl8mw9nrUP9FqBcBJeVtyJsC4WmSxNoAGWPhWD4EJMHw1pAwBE5dgw7roI09nAmSHI0jIbeINaoF6efG47rlLMw/aB5Aj4ZwZAzM3AfhfaFbNKTli+2VqbA03dRnfxdY7QVOK8C7BWz0EU45rgD3JhA3WPz6xZW197gCUFA0A/vZKUI8c+vtV8WxwRdSiZD9suMybkyFVZnwySF5dq4FuZPBcyuoyq0ZIFIb8g24OsHs7mChwZQ9EHWS6wrAw3vBGBSAiOPmAYT0gOmu0GAlZAbAzzdhmDopkGQxWTB3vzyrZCVzIDAJrAwQ4SEq2foTNLeDxrWhoS2sPQnzUykpA3BtGobIDPg41TwAtYsWdtBni+zIqyk0ihTbCxNhRw5MS5bnGga4GywcqGkJy90h9iy0eAnsbeD7y9DVCY7mw8TdAqAgYyz2iij+O80D2O8n+k48B35twc0ZrhbD3AMwqxsc/hUCd4lvW3vICgLPOGhVF5Z7iLQVL1TppyfDiNZw/S6MSJQWpMf44NreETqufxyAktUBP8j9Hc4UwMNSeKulVGvxUTgyGnJuwshE8X2/Myz1EBIqFazyhOarIWe8yLj3ZpjRFWpZgXusImGYHjXhNYJW9heSXbsjgTrXh8j+ovns98A7AXZdEGIpIk7aI+RLHQ13jNA/Tnr+4zg4Xyj2Y9pBtA/YL4edI6GDIzhGQNQAGVxdopUMF+u+TjZsVgNlQSosKh+bKnlAexiUAHtHQdNVcPGWkOz2B7D6hAyXpJHgYANuGyHKC95pA92jRfuq1PFDpAJqujarAzvOw1de0OdlaLVGDSJ12YT8Rb2xmd4FZqVAbWtY2BMWHJJpqHZRM1zKr9bJAMgulLLHD4Z+TSGvCNTs990OSefFbnBLUBO21yY4mGtq71L3ss0Z7Zbh+OdhZKExbm4PGNUG7pfA+lOwMgN6NgIlQ58EUwAlrY71wGsrpI+FwnuQclns84tMdor1ob1F3qoiFWtypzJ5Gg0WWP/nx3E5COPLtnS6PFXL+p9cSBSsar+SKRDVeimtYEi1XssrQFTrj0kFiGr9NXv0SKi2n9PK59Jz+j3/A2JwBwXagI4aAAAAAElFTkSuQmCC">
    <title>行政区划图</title>
    <style>
        html,
        body,
        #container {
            width: 100%;
            height: 100%;
            margin: 0px;
        }

        #panel {
            position: absolute;
            top: 21px;
            bottom: 0;
            left: 0;
            height: max-content;
            max-height: 80%;
            overflow: auto;
            overflow-x: hidden;
            /*width: 200px;*/
            z-index: 999;
            /*border-left: 1px solid #eaeaea;*/
            color: white;
            background: rgba(0, 0, 0, 0.5);
        }

        #upt-panel {
            position: absolute;
            z-index: 999;
            /*width: 200px;*/
            max-height: 38px;
        }

        #upt-panel label, #full-panel label {
            text-align: center;
            background-color: #3366cc;
            color: white;
        }

        #full-panel {
            position: absolute;
            right: 0;
            z-index: 999;
            /*width: 200px;*/
            max-height: 38px;
        }

        #panel-botton {
            position: absolute;
            bottom: 0;
            left: 0;
            /*max-height:10vh;*/
            overflow: auto;
            overflow-x: hidden;
            z-index: 999;
            /*background: #fff;*/
        }

        /*@media all and (-webkit-min-device-pixel-ratio: 2) {*/
        /*    #panel-botton {*/
        /*        max-height: 10vh;*/
        /*    }*/
        /*}*/

        .unselectable {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

    </style>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>

<div id="full-panel">
    <label onclick="toggleFullScreen()" class="unselectable"><span>全屏</span></label>
</div>

<div id="upt-panel">
    <label onclick="updateSelect()" class="unselectable"><span>更新所选</span></label>
</div>

<div id="panel"></div>

<div id="panel-botton"></div>

<script type="text/javascript">
    function updateSelect() {
        var sups = document.getElementsByName('sup');
        var subs = document.getElementsByName('sub');

        var sb = [];

        for (var i = 0; i < sups.length; i++) {
            var p = sups[i];
            var b = subs[i];
            if (p.checked) {
                if (b.checked) {
                    sb.push.apply(sb, JSON.parse(b.value))
                } else {
                    sb.push.apply(sb, JSON.parse(p.value))
                }
            }
        }
        lvl(sb);
    }
</script>
<div id="container"></div>
<script type="text/javascript" src='//webapi.amap.com/maps?v=1.3&key=160cab8ad6c50752175d76e61ef92c50'></script>
<!-- UI组件库 1.0 -->
<script src="//webapi.amap.com/ui/1.0/main.js?v=1.0.11"></script>
<script type="text/javascript">
    //创建地图
    var map = new AMap.Map('container', {
        cursor: 'default',
        zoom: 4
    });

    //just some colors
    var colors = [
        "#3366cc", "#dc3912", "#ff9900", "#109618", "#990099", "#0099c6", "#dd4477", "#66aa00",
        "#b82e2e", "#316395", "#994499", "#22aa99", "#aaaa11", "#6633cc", "#e67300", "#8b0707",
        "#651067", "#329262", "#5574a6", "#3b3eac"
    ];

    // ========================= 图层 =============================
    // 谷歌地图
    var google = new AMap.TileLayer({
        getTileUrl: 'http://mt{1,2,3,0}.google.cn/vt/lyrs=m@142&hl=zh-CN&gl=cn&x=[x]&y=[y]&z=[z]&s=Galil',
        zIndex: 2
    });
    // 谷歌卫星
    var googlewx = new AMap.TileLayer({
        //图块取图地址
        tileUrl: 'https://mt{1,2,3,0}.google.cn/maps/vt?lyrs=s@194&hl=zh-CN&gl=cn&x=[x]&y=[y]&z=[z]',
        zIndex: 2
    });
    // 高德路网
    var amap = new AMap.TileLayer.RoadNet();
    // 高德卫星
    var amapwx = new AMap.TileLayer.Satellite();
    // 高德实时交通
    var amapjt = new AMap.TileLayer.Traffic();

    var mapType = {
        '高德': [],
        '高星网': [amapwx, amap],
        '高星': [amapwx],
        '高德交通': [amapjt, amap],
        '谷歌': [google],
        '谷星': [googlewx],
        '谷星高网': [googlewx, amap],
    }

    function slayer(tp) {
        amap.setMap(null);
        amapwx.setMap(null);
        amapjt.setMap(null);
        google.setMap(null);
        googlewx.setMap(null);

        map = new AMap.Map('container', {
            cursor: 'default',
            layers: tp,
            zoom: 4
        });

        loadui();
    }

    // 控制台切换函数，使用如 lvl(dataMap.湖南省) 其中 dataMap. 会有提示
    function lvl(nds) {
        adcodes = nds;
        districtExplorer.loadMultiAreaNodes(nds, function (error, areaNodes) {

            //清除已有的绘制内容
            districtExplorer.clearFeaturePolygons();

            for (var i = 0, len = areaNodes.length; i < len; i++) {
                renderAreaNode(areaNodes[i]);
            }

            //更新地图视野
            map.setFitView(districtExplorer.getAllFeaturePolygons());
        });
    }

    // 提取内部变量
    var districtExplorer;
    var adcodes = [];

    // 提取内部函数
    function renderAreaNode(areaNode) {

        //绘制子区域
        districtExplorer.renderSubFeatures(areaNode, function (feature, i) {

            var fillColor = colors[i % colors.length];
            var strokeColor = colors[colors.length - 1 - i % colors.length];

            return {
                cursor: 'default',
                bubble: true,
                strokeColor: strokeColor, //线颜色
                strokeOpacity: 1, //线透明度
                strokeWeight: 1, //线宽
                fillColor: fillColor, //填充色
                fillOpacity: 0.35, //填充透明度
            };
        });

        //绘制父区域
        districtExplorer.renderParentFeature(areaNode, {
            cursor: 'default',
            bubble: true,
            strokeColor: 'black', //线颜色
            strokeOpacity: 1, //线透明度
            strokeWeight: 1, //线宽
            fillColor: null, //填充色
            fillOpacity: 0.35, //填充透明度
        });
    }

    function loadui() {
        AMapUI.loadUI(['geo/DistrictExplorer'], function (DistrictExplorer) {

            //创建一个实例
            districtExplorer = new DistrictExplorer({
                map: map
            });

            districtExplorer.loadMultiAreaNodes(adcodes, function (error, areaNodes) {

                //清除已有的绘制内容
                districtExplorer.clearFeaturePolygons();

                for (var i = 0, len = areaNodes.length; i < len; i++) {
                    renderAreaNode(areaNodes[i]);
                }

                //更新地图视野
                map.setFitView(districtExplorer.getAllFeaturePolygons());
            });

        });
    }

    loadui();

    function toggleFullScreen() {
        var doc = window.document;
        var docEl = doc.documentElement;

        var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
        var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

        if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
            requestFullScreen.call(docEl);
        } else {
            cancelFullScreen.call(doc);
        }
    }

</script>
<script type="text/javascript">
    const provData = {
        '安徽': ['[340000]', '[340100,340200,340300,340400,340500,340600,340700,340800,341000,341100,341200,341300,341500,341600,341700,341800]'],
        '澳门': ['[820000]'],
        '北京': ['[110000]'],
        '福建': ['[350000]', '[350100,350200,350300,350400,350500,350600,350700,350800,350900]'],
        '甘肃': ['[620000]', '[620100,620300,620400,620500,620600,620700,620800,620900,621000,621100,621200,622900,623000]'],
        '广东': ['[440000]', '[440100,440200,440300,440400,440500,440600,440700,440800,440900,441200,441300,441400,441500,441600,441700,441800,445100,445200,445300]'],
        '广西': ['[450000]', '[450100,450200,450300,450400,450500,450600,450700,450800,450900,451000,451100,451200,451300,451400]'],
        '贵州': ['[520000]', '[520100,520200,520300,520400,520500,520600,522300,522600,522700]'],
        '海南': ['[460000]', '[460100,460200,460300]'],
        '河北': ['[130000]', '[130100,130200,130300,130400,130500,130600,130700,130800,130900,131000,131100]'],
        '河南': ['[410000]', '[410100,410200,410300,410400,410500,410600,410700,410800,410900,411000,411100,411200,411300,411400,411500,411600,411700]'],
        '黑龙': ['[230000]', '[230100,230200,230300,230400,230500,230600,230700,230800,230900,231000,231100,231200,232700]'],
        '湖北': ['[420000]', '[420100,420200,420300,420500,420600,420700,420800,420900,421000,421100,421200,421300,422800]'],
        '湖南': ['[430000]', '[430100,430200,430300,430400,430500,430600,430700,430800,430900,431000,431100,431200,431300,433100]'],
        '吉林': ['[220000]', '[220100,220200,220300,220400,220500,220600,220700,220800,222400]'],
        '江苏': ['[320000]', '[320100,320200,320300,320400,320500,320600,320700,320800,320900,321000,321100,321200,321300]'],
        '江西': ['[360000]', '[360100,360200,360300,360400,360500,360600,360700,360800,360900,361000,361100]'],
        '辽宁': ['[210000]', '[210100,210200,210300,210400,210500,210600,210700,210800,210900,211000,211100,211200,211300,211400]'],
        '内蒙': ['[150000]', '[150100,150200,150300,150400,150500,150600,150700,150800,150900,152200,152500,152900]'],
        '宁夏': ['[640000]', '[640100,640200,640300,640400,640500]'],
        '青海': ['[630000]', '[630100,630200,632200,632300,632500,632600,632700,632800]'],
        '山东': ['[370000]', '[370100,370200,370300,370400,370500,370600,370700,370800,370900,371000,371100,371200,371300,371400,371500,371600,371700]'],
        '山西': ['[140000]', '[140100,140200,140300,140400,140500,140600,140700,140800,140900,141000,141100]'],
        '陕西': ['[610000]', '[610100,610200,610300,610400,610500,610600,610700,610800,610900,611000]'],
        '上海': ['[310000]'],
        '四川': ['[510000]', '[510100,510300,510400,510500,510600,510700,510800,510900,511000,511100,511300,511400,511500,511600,511700,511800,511900,512000,513200,513300,513400]'],
        '天津': ['[120000]'],
        '西藏': ['[540000]', '[540100,540200,540300,540400,540500,542400,542500]'],
        '香港': ['[810000]'],
        '新疆': ['[650000]', '[650100,650200,650400,650500,652300,652700,652800,652900,653000,653100,653200,654000,654200,654300]'],
        '云南': ['[530000]', '[530100,530300,530400,530500,530600,530700,530800,530900,532300,532500,532600,532800,532900,533100,533300,533400]'],
        '浙江': ['[330000]', '[330100,330200,330300,330400,330500,330600,330700,330800,330900,331000,331100]'],
        '重庆': ['[500000]']
    }
    const citiesMap = new Map(Object.entries(provData))

    let panelDat = $('<div>')

    for (const [k, v] of citiesMap.entries()) {
        let dat = $('<div>')

        let pipt = $('<input>')
        pipt.attr('type', 'checkbox')
        pipt.attr('name', 'sup')
        pipt.attr('value', v[0])

        let plab = $('<label>')
        plab.append(pipt)
        plab.addClass('unselectable')
        plab.append('<span>' + k + '</span>')

        dat.append(plab)

        let cipt = $('<input>')
        cipt.attr('type', 'checkbox')
        cipt.attr('name', 'sub')
        if (v.length > 1) {
            cipt.attr('value', v[1])
        } else {
            cipt.attr('hidden', 'true')
        }

        let clab = $('<label>')
        clab.append(cipt)

        dat.append(clab)


        panelDat.append(dat)
    }
    $('#panel').append(panelDat)


    // 左下底图
    for (const [i, k] of Object.keys(mapType).entries()) {
        let spn = $('<span>')
        spn.addClass('button toggle')
        spn.css('background-color', colors[i])
        spn.css('color', 'white')
        spn.html(k)

        let lab = $('<label>')
        lab.addClass('unselectable')
        lab.css('margin-right', '3px')
        lab.addClass('stack')
        lab.attr('onclick', 'slayer(mapType.' + k + ')')
        // lab.append('<input name="stack" type="radio">')
        lab.append(spn)

        $('#panel-botton').append(lab)
    }
</script>
</body>

</html>